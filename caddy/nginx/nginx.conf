user  nginx;
worker_processes  auto;

events {
    worker_connections 1024;
}

http {
    include       /etc/nginx/mime.types;
    default_type  application/octet-stream;

    # ---- LOG FORMAT THAT SHOWS REAL CLIENT IP FROM CLOUDFLARE ----
    # remote_addr = who connected to nginx (Caddy IP)
    # cf_ip      = real client IP from Cloudflare header
    # xff        = X-Forwarded-For chain (from Caddy)

log_format main '$realip_remote_addr - $remote_user [$time_local] '
                '"$request" $status $body_bytes_sent '
                '"$http_referer" "$http_user_agent" '
                'xff="$http_x_forwarded_for"';

access_log /var/log/nginx/access.log main;

    sendfile        on;
    keepalive_timeout  65;

    # all your server configs (for mksvk.com, reddy.mksvk.com, etc.)
    include /etc/nginx/conf.d/*.conf;
}
